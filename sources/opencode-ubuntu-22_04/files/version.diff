--- a/packages/opencode/src/installation/index.ts
+++ b/packages/opencode/src/installation/index.ts
@@ -179,7 +179,10 @@
     await $`${process.execPath} --version`.nothrow().quiet().text()
   }

-  export const VERSION = typeof OPENCODE_VERSION === "string" ? OPENCODE_VERSION : "local"
+  export const VERSION =
+    (typeof globalThis.OPENCODE_VERSION === "string" && globalThis.OPENCODE_VERSION) ||
+    (typeof process.env.OPENCODE_VERSION === "string" && process.env.OPENCODE_VERSION) ||
+    "local"
   export const CHANNEL = typeof OPENCODE_CHANNEL === "string" ? OPENCODE_CHANNEL : "local"
   export const USER_AGENT = `opencode/${CHANNEL}/${VERSION}/${Flag.OPENCODE_CLIENT}`
